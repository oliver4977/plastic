<!DOCTYPE html><html>
<head>
  <meta charset="UTF-8">
  <title>ìë™ í”Œë¼ìŠ¤í‹± ì‚¬ìš© ì¸¡ì • ì‹œìŠ¤í…œ</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f8fc;
      margin: 0;
      padding: 40px;
    }header {
  background-color: #2a5d9f;
  color: white;
  padding: 20px;
  font-size: 24px;
  text-align: center;
  border-radius: 8px;
}

main {
  max-width: 700px;
  margin: 40px auto;
  background: white;
  padding: 30px;
  border-radius: 15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

select, button {
  padding: 12px;
  margin-top: 20px;
  width: 100%;
  font-size: 16px;
}

button {
  background-color: #2a5d9f;
  color: white;
  border: none;
  cursor: pointer;
}

.result {
  margin-top: 30px;
  padding: 20px;
  background: #f0f9ff;
  border-left: 5px solid #3399ff;
}

.highlight {
  color: #007700;
  font-weight: bold;
}

#chartContainer {
  margin-top: 40px;
  display: none;
}

  </style>
</head>
<body>  <header>í”Œë¼ìŠ¤í‹± ìë™ ì¸¡ì • ì‹œë®¬ë ˆì´ì…˜</header>  <main>
    <label for="apt">ì•„íŒŒíŠ¸ ë‹¨ì§€ ì„ íƒ:</label>
    <select id="apt" onchange="showChart()">
      <option>í•œë‚´ë“¤</option>
      <option>ì´ì•ˆ</option>
      <option>ë¶€ì˜</option>
    </select><button onclick="simulateMeasurement()">ğŸ“¦ ìë™ ì¸¡ì • ì‹œì‘</button>
<button onclick="showChart()">ğŸ“Š ì›”ë³„ ì°¨íŠ¸ ë³´ê¸°</button>

<div class="result" id="output" style="display:none;"></div>
<div id="chartContainer">
  <canvas id="usageChart"></canvas>
</div>

  </main>  <script>
    const ê¸°ì¤€ì‚¬ìš©ëŸ‰ = 100;
    const ëª©í‘œì‚¬ìš©ëŸ‰ = 90;
    let chartInstance = null;

    function getCurrentMonth() {
      const now = new Date();
      return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`;
    }

    function simulateMeasurement() {
      const apt = document.getElementById("apt").value;
      const ì‚¬ìš©ëŸ‰ = Math.floor(Math.random() * 40) + 60; // 60~99kg
      const ì ˆê°ëŸ‰ = Math.max(0, ê¸°ì¤€ì‚¬ìš©ëŸ‰ - ì‚¬ìš©ëŸ‰);
      const í¬ì¸íŠ¸ = ì ˆê°ëŸ‰ * 10;
      const ê°ë©´ì•¡ = í¬ì¸íŠ¸ * 10000;
      const co2ì ˆê° = ì ˆê°ëŸ‰ * 2.5;

      let ë©”ì‹œì§€ = "";
      if (ì ˆê°ëŸ‰ >= 20) ë©”ì‹œì§€ = "ğŸ‰ í™˜ê²½ ì˜ì›…ì…ë‹ˆë‹¤!";
      else if (ì ˆê°ëŸ‰ >= 10) ë©”ì‹œì§€ = "ğŸ‘ ìš°ìˆ˜ ì ˆê°!";
      else if (ì ˆê°ëŸ‰ > 0) ë©”ì‹œì§€ = "ğŸ˜Š ì¢‹ì€ ì¶œë°œì…ë‹ˆë‹¤!";
      else ë©”ì‹œì§€ = "âš ï¸ ê¸°ì¤€ë³´ë‹¤ ë§ì´ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.";

      let ëª©í‘œê²°ê³¼ = (ì‚¬ìš©ëŸ‰ <= ëª©í‘œì‚¬ìš©ëŸ‰)
        ? `âœ… ëª©í‘œ(${ëª©í‘œì‚¬ìš©ëŸ‰}kg) ë‹¬ì„±!`
        : `âŒ ëª©í‘œ(${ëª©í‘œì‚¬ìš©ëŸ‰}kg) ë‹¬ì„± ì‹¤íŒ¨.`;

      const output = document.getElementById("output");
      output.style.display = "block";
      output.innerHTML = `
        <h3>${apt} ë‹¨ì§€ ì¸¡ì • ê²°ê³¼</h3>
        â–¸ ì¸¡ì •ëœ ì‚¬ìš©ëŸ‰: <span class="highlight">${ì‚¬ìš©ëŸ‰}kg</span><br>
        â–¸ ê¸°ì¤€ ì‚¬ìš©ëŸ‰: ${ê¸°ì¤€ì‚¬ìš©ëŸ‰}kg<br>
        â–¸ ì ˆê°ëŸ‰: <span class="highlight">${ì ˆê°ëŸ‰}kg</span><br>
        â–¸ í¬ì¸íŠ¸ íšë“: <span class="highlight">${í¬ì¸íŠ¸}ì </span><br>
        â–¸ ê°ë©´ ì˜ˆìƒì•¡: <span class="highlight">${ê°ë©´ì•¡.toLocaleString()}ì›</span><br>
        â–¸ ì´ì‚°í™”íƒ„ì†Œ ì ˆê°ëŸ‰: <span class="highlight">${co2ì ˆê°.toFixed(1)}kg</span><br>
        <br>
        ${ë©”ì‹œì§€}<br>${ëª©í‘œê²°ê³¼}
      `;

      // ì›”ë³„ ì €ì¥
      const month = getCurrentMonth();
      const key = `usage_${apt}`;
      let data = JSON.parse(localStorage.getItem(key)) || {};
      data[month] = ì‚¬ìš©ëŸ‰;
      localStorage.setItem(key, JSON.stringify(data));

      // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
      showChart();
    }

    function showChart() {
      const apt = document.getElementById("apt").value;
      const key = `usage_${apt}`;
      const data = JSON.parse(localStorage.getItem(key)) || {};
      const labels = Object.keys(data).sort();
      const values = labels.map(month => data[month]);

      const ctx = document.getElementById('usageChart').getContext('2d');
      document.getElementById("chartContainer").style.display = "block";

      if (chartInstance) {
        chartInstance.destroy();
      }

      chartInstance = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [{
            label: `${apt} ì›”ë³„ í”Œë¼ìŠ¤í‹± ì‚¬ìš©ëŸ‰ (kg)`,
            data: values,
            borderColor: '#2a5d9f',
            backgroundColor: 'rgba(42, 93, 159, 0.1)',
            fill: true,
            tension: 0.2
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: true },
            title: {
              display: true,
              text: `${apt} ì•„íŒŒíŠ¸ì˜ ì›”ë³„ ì‚¬ìš©ëŸ‰ ì¶”ì´`
            }
          }
        }
      });
    }
  </script></body>
</html>
